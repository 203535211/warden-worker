这是部署教程 https://www.nodeseek.com/post-575140-1
前言
一直见有网友在纠结密码管理器应该跑在哪。是用官方来的稳定，还是自建来的可控，亦或是各种托管平台上来的廉价（免费）？那如果我说有一个既稳定、又免费的自建方案呢?

把Rust编译成WASM放浏览器里跑，想必各位已经非常熟悉了，其实同样是基于V8的Worker里也是可以跑的。哎你说巧不巧，服务端有个现成的用Rust写的vaultwarden可以抄，bitwarden的绝大多数功能都是可以整成无状态的，Cloudflare还正好提供了D1数据库，这还能不薅它？
虽说Cloudflare最近崩过几次，但CF都崩了，还有几个网站登录得上呢 …

当然这么牛的思路肯定不是我能想出来的，也不是我找到的（看了二叉树树的视频才知道有这么个神必项目），但这并不妨碍我化身为API对齐的牛马，目前是打算长期维护基础功能的。

原项目的端点实现缺的有点多，已经不兼容新版客户端了，批量导入也有点问题，而且好像作者也没有要更新的意思，我这里就放上我二开的版本了。

项目地址: https://github.com/qaz741wsd856/warden-worker

友情提醒: 本项目只是Bitwarden的最小兼容服务端，目前只实现基础功能，暂不考虑网页前端。找到了现成的VaultWarden的web端，遂偷之。网页版已通过 Static Assets 的方式集成了 bw_web_builds ，静态资源不消耗Worker额度。但网页中大部分功能是用不了的，包括但不限于：

share
send
设备管理
组织
紧急访问
除TOTP外的两步验证
我整这个Web UI主要是为了批量操作、配置TOTP和编辑等效域名的。

简易部署教程
该项目的部署方法前半部分基本与二叉树树的教程一致: 你可曾想过，直接将BitWarden部署到Cloudflare Worker？
因此我在此只做简述并强调关键步骤，详细图文流程请参考上面的博客，记得要fork我的项目就行，前两步有修改，请注意。

前期准备
你需要准备：

一个 Cloudflare 账户
一个 Github 账户
一个没有被阻断的域名
第一步：设置 Github 项目
首先fork我的仓库到你的账户（要是能顺手点个星星就好啦），进入Action页面，启用Action。
点击 settings - Secrets and variables - Actions，准备添加 Repository secrets，接下来我们一共要添加三个secrets。

然后进入 Cloudflare 控制台，https://dash.cloudflare.com/
在浏览器地址栏中复制你的account id

image

回到github页面，点击New repository secret，名称写CLOUDFLARE_ACCOUNT_ID，值就写刚才复制的id。

接着访问https://dash.cloudflare.com/profile/api-tokens
选择编辑Worker的模板，然后给它再添加编辑D1和编辑KV的权限，再创建api令牌，回到github页面添加为CLOUDFLARE_API_TOKEN。
9hYXlTxNEiWs60ujpPjf1kByKnDDpjgI.webp

最后去Cloudflare控制台的存储与数据库 - D1 sql 数据库，创建一个数据库，并复制它的id。

image

回到github，添加为D1_DATABASE_ID。

附件支持（可选）
本项目的附件功能依赖R2或KV，默认会自动创建用于存储附件的KV。

KV完全免费不绑卡，单个附件限25MB；
启用R2需要绑卡，本项目因为是用Worker转发，受请求体大小限制，单个附件限100MB。

虽然Cloudflare提供了慷慨的R2免费额度，但可能产生非预期的扣费，参考Cloudflare R2 pricing，因此该功能默认关闭。

如果你想启用R2支持，需要先去Cloudflare控制台创建一个R2储存桶，记下它的名称。
在github仓库中添加一个名为R2_NAME的secret，值就填刚才创建的桶名称。

如果你完全不需要附件支持，可以
